<!DOCTYPE HTML>
<html>
<head>
<title>Invoice Validaiton</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="favicon.png" type="image/x-icon">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<style>
	body{background-color:#ecf0f1; color: #ecf0f1; padding: 10px;}
	.container{background-color:#16a085; border-radius: 1px; padding: 10px; color: #ecf0f1;}
	#clear-btn{width: 100%; background-color: #c0392b;}
	#hide-btn{width: 100%; background-color: #2980b9;}
	#export-btn{width: 100%; background-color: #2ecc71;}
	.table{color: #ecf0f1;}
	.hidden{display: none;}
	.white-text{color: #ecf0f1;}
	tr{max-width: 100%;}
	ul{list-style: none;}
	#instructions{font-size: 22px; text-align: left; width: 60%; margin: auto;}
</style>

</head>
<body>
<div class="container text-center">
	<h1 >Invoice Validation</h1>
	<hr>
	<button class="btn btn-primary" id="instruction-btn">Show Instructions for Use</button>
	<div id="instructions" class="hidden">
		<ol>
			<li>Export all customers and upload the single file into the "Customer File" area below. If customer records already exist in local storage, only upload updated records).</li>
			<li>Download invoice files and upload them in the "Invoice FIle" area below. (You can upload multiple files at once by selecting all the files and dragging them into the "Choose Files" box).</li>
			<li>All the invoice lines will be displayed in the "Invoice Lines" section. This can be toggled using the "Toggle Invoice Lines" button.</li>
			<li> Any errors will display in the "Invoice Errors" section. These errors can be exported into a .txt file using the "Export Errors" button.</li>
			<li>Refresh the page and repeat the process with Credit Note files (You will not need to re-upload the customer file. Credit files can be run at the same time as invoices, but for clarity it is simpler to run them seperately).</li>

		</ol>
	</div>
	<hr>
	<p><strong>Please load the customer file</strong></p>
	<form>
		<input type="file" onchange="submitCustomers()" id="customer-input">
		<button type="button" class="btn btn-primary" onclick="submitCustomers()">Submit File</button>
	</form>
	
	<h3>Customer Files Processed</h3>
	<code class="white-text"><div class="text-left">
		<ol id="customer-files"></ol>
	</div></code>

	<hr>
	
	<p><strong>Please upload an invoice file to validate</strong></p>
	<form>
		<input type="file" onchange="submitFile()" id="file-input" multiple>
		<button type="button" class="btn btn-primary" onclick="submitFile()">Submit File</button>
	</form>
</div>

<div class="container text-center">
	<h3>Invoice Files Processed</h3>
	<code class="white-text"><div class="text-left">
		<ol id="invoice-files"></ol>
	</div></code>
</div>

<br>

<div class="container text-center">
	<button type="button" class="btn btn-danger" id="clear-btn" onclick="clearPage()">Clear All Lines and Errors</button>
	<br><br>
	<button type="button" class="btn btn-primary" id="hide-btn" onclick="hideLines()">Toggle Invoice Lines</button>
	<br><br>
	<button type="button" class="btn btn-success" id="export-btn" onclick="exportErrors('Errors - ', errorsExport.join('\n'))">Export Errors</button>
</div>

<br>

<div class="container text-center">
	<h3>Invoice Lines</h3>
	<div class="text-left">
		<table class="table" id="invoice-output">
			<thead class="thead-light">
			<tr>
				<th>#</th>
				<th>Invoice Line</th>
			</tr>
			</thead>
		</table>
	</div>
</div>

<hr>

<div class="container text-center">
	<h3>Invoice Errors</h3>
	<div class="text-left">
		<table class="table" id="errors">
			<thead class="thead-light">
			<tr>
				<th>Invoice Ref</th>
				<th>Error Description</th>
				<th>Error Line</th>
				<th>File Name</th>
				<th>Invoice Line</th>
			</tr>
			</thead>
		</table>
	</div>
</div>


<script src="papa-parse.js"></script>
<script src="main.js"></script>
<script src="instructions.js"></script>
</body>
</html>
